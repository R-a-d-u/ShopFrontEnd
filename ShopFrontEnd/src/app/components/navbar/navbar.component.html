<nav class="navbar">
  <div class="container">
    <a routerLink="/" class="logo">Luxury & Gold</a>
    <div class="nav-links">
      <a routerLink="/jewelry">Jewelry</a>
      <a routerLink="/gold-coins">Gold Coins</a>
      <a routerLink="/gold-bars">Gold Bars</a>
      <div class="search-container" (mousedown)="keepDropdownOpen($event)">
        <a class="search-icon" (click)="toggleSearch()">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
          </svg>
        </a>
        <div class="search-dropdown" *ngIf="isSearchOpen" data-aos="fade-down">
          <div class="search-input-container">
            <input 
              type="text" 
              placeholder="Search products..." 
              [(ngModel)]="searchTerm"
              (keyup.enter)="searchProducts()"
              #searchInput>
            <button class="btn btn-login" (click)="searchProducts()">Search</button>
          </div>
          <div class="search-results" *ngIf="searchResults && searchResults.length > 0">
            <div class="search-result-item" *ngFor="let product of searchResults" (click)="navigateToProduct(product.id)">
              <img [src]="'assets/' + product.image + '.jpg'" [alt]="product.name">
              <div class="product-info">
                <h4>{{ product.name }}</h4>
                <p>${{ product.sellingPrice.toFixed(2) }}</p>
              </div>
            </div>
          </div>
          <p class="no-results" *ngIf="searchResults && searchResults.length === 0">No products found</p>
        </div>
      </div>
      <a routerLink="/cart" class="cart-link">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="9" cy="21" r="1"></circle>
          <circle cx="20" cy="21" r="1"></circle>
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
        </svg>
        <span class="cart-count">2</span>
      </a>
      <a routerLink="/login" class="btn btn-login">Login</a>
      <li class="nav-item" *ngIf="!currentUser">
        <a class="nav-link" routerLink="/login">Login</a>
      </li>
      <li class="nav-item dropdown" *ngIf="currentUser">
        <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown">
          {{ currentUser.name }}
        </a>
        <div class="dropdown-menu">
          <a class="dropdown-item" routerLink="/profile">View Profile</a>
          <a class="dropdown-item" *ngIf="authService.isAdmin()" routerLink="/admin">Admin Dashboard</a>
          <div class="dropdown-divider"></div>
          <a class="dropdown-item" (click)="logout()" style="cursor: pointer">Logout</a>
        </div>
      </li>
    </div>
  </div>
</nav>