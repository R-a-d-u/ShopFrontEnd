<!-- category-list.component.html -->
<app-navbar></app-navbar>
<section class="section admin-section">
    <div class="container">
        <p-toast position="top-center" closable="false"></p-toast>
        <p-confirmDialog 
        [style]="{width: '450px'}"
        header="Confirmation" 
        icon="pi pi-exclamation-triangle"
        acceptLabel="Delete" 
        rejectLabel="Cancel"
        acceptButtonStyleClass="custom-accept-btn"
        rejectButtonStyleClass="custom-reject-btn"
        styleClass="custom-confirm-dialog"
        [closeOnEscape]="true"
        [dismissableMask]="true"
       >
      </p-confirmDialog>
        <div class="admin-dashboard" data-aos="fade-up">
            <h2>Category Management</h2>

            <div class="category-actions">
                <button class="btn " (click)="addCategory()">
                    Add New Category
                </button>
            </div>

            <div class="category-list">
                <table class="category-table" *ngIf="!loading && !errorMessage && filteredCategories.length > 0">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Category Name</th>
                            <th>Last Modified Date</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let category of filteredCategories">
                            <td>{{ category.id }}</td>
                            <td>{{ category.name }}</td>
                            <td>{{ formatDate(category.lastModifiedDate) }}</td>
                            <td class="action-buttons">
                                <button class="action-btn view-btn" title="View Details"
                                    (click)="viewCategoryDetails(category.id)">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
                                        <circle cx="12" cy="12" r="3" />
                                    </svg>
                                </button>
                                <button class="action-btn edit-btn" title="Edit Category"
                                    (click)="editCategory(category.id)">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M20 14.66V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h5.34" />
                                        <polygon points="18 2 22 6 12 16 8 16 8 12 18 2" />
                                    </svg>
                                </button>

                                <button class="action-btn delete-btn" title="Delete Category"
                                    (click)="deleteCategory(category.id)">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                                        fill="none" stroke="currentColor" stroke-width="2">
                                        <path
                                            d="M6 2V6H4V2H2v4h2v12c0 1.104.896 2 2 2h12c1.104 0 2-.896 2-2V6h2V2h-2V6h-2V2h-2V6h-2V2h-2V6H6z" />
                                    </svg>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <div *ngIf="!loading && !errorMessage && filteredCategories.length === 0" class="no-categories">
                    <p>No categories found.</p>
                </div>
            </div>
        </div>
    </div>
</section>
<app-footer></app-footer>